<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3åã®ç”»ä¼¯ãŒæã„ãŸ ã‚¤ãƒ©ã‚¹ãƒˆå½“ã¦ã‚²ãƒ¼ãƒ </title>
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP|Dancing+Script" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="phone-frame">
    <div class="screen">
      <!-- æœ€åˆã®ç”»é¢ -->
      <h1 class="christmas-text">âœ¨å¿˜å¹´ä¼šç‰¹åˆ¥ä¼ç”»ï¼å§‹ã¾ã‚Šã¾ã™âœ¨</h1>
      <p class="christmas-text">
        3åã®ç”»ä¼¯ãŒæã„ãŸã‚¤ãƒ©ã‚¹ãƒˆå½“ã¦ã‚²ãƒ¼ãƒ ã§ã™ã€‚<br>
        å„ãŠé¡Œã®3æšã®ã‚¤ãƒ©ã‚¹ãƒˆã‚’è¦‹ã¦ã€ä½•ãŒæã‹ã‚Œã¦ã„ã‚‹ã‹å½“ã¦ã¦ãã ã•ã„ï¼
      </p>
      <button id="start_button">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ</button>

      <!-- ã‚²ãƒ¼ãƒ ç”»é¢ -->
      <img id="question_image" src="" alt="å•é¡Œã®ã‚¤ãƒ©ã‚¹ãƒˆ" style="display:none;">
      <div class="button_section" id="choices_section" style="display:none;"></div>
      <p id="result_display"></p>
      <button id="next_button" style="display:none;">æ¬¡ã®ç”»åƒ</button>
    </div>
  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    const QUESTIONS = [
      { imgs: ["img/sazae_1.png","img/sazae_2.png","img/sazae_3.png"], choices:["ã‚µã‚¶ã‚¨ã•ã‚“","ã‚«ãƒ„ã‚ª","ãƒ¯ã‚«ãƒ¡"], answer:0 },
      { imgs: ["img/stollen_1.png","img/stollen_2.png","img/stollen_3.png"], choices:["ã‚·ãƒ¥ãƒˆãƒ¼ãƒ¬ãƒ³","ãƒ‘ã‚¦ãƒ³ãƒ‰ã‚±ãƒ¼ã‚­","ãƒ–ãƒƒã‚·ãƒ¥ãƒ»ãƒ‰ãƒ»ãƒã‚¨ãƒ«"], answer:0 },
      { imgs: ["img/bananaman_1.png","img/bananaman_2.png","img/bananaman_3.png"], choices:["ãƒãƒŠãƒŠãƒãƒ³","ã‚µãƒ³ãƒ‰ã‚¦ã‚£ãƒƒãƒãƒãƒ³","ãƒ€ã‚¦ãƒ³ã‚¿ã‚¦ãƒ³"], answer:0 },
      { imgs: ["img/employee_1.png","img/employee_2.png","img/employee_3.png"], choices:["â—¯â—¯ã•ã‚“","â–³â–³ã•ã‚“","Ã—Ã—ã•ã‚“"], answer:0 }
    ];

    let currentQuestion = 0;
    let currentImgIndex = 0;

    // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã§ã‚²ãƒ¼ãƒ é–‹å§‹
    $("#start_button").on("click", function() {
      $(this).hide();               // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³éè¡¨ç¤º
      $("h1").text("âœ¨3åã®ç”»ä¼¯ãŒæã„ãŸ ã‚¤ãƒ©ã‚¹ãƒˆå½“ã¦ã‚²ãƒ¼ãƒ âœ¨");
      $("p").hide();                // ãƒ«ãƒ¼ãƒ«èª¬æ˜éè¡¨ç¤º
      $("#question_image").show();
      loadQuestion();
    });

    function loadQuestion() {
      const q = QUESTIONS[currentQuestion];
      currentImgIndex = 0;

      $("#result_display").text("").css({display:'block', height:'auto'});;
      $("#choices_section").hide();
      $("#next_button").text("æ¬¡ã®ç”»åƒ").show();

      $("#question_image").attr("src", q.imgs[currentImgIndex]);

      $("#next_button").off("click").on("click", function() {
        currentImgIndex++;
        if (currentImgIndex < q.imgs.length) {
          $("#question_image").attr("src", q.imgs[currentImgIndex]);
        } else {
          $(this).hide();
          showChoices();
        }
      });
    }

    function showChoices() {
      const q = QUESTIONS[currentQuestion];
      const choicesDiv = $("#choices_section");
      choicesDiv.empty().show();

      q.choices.forEach((choice, index) => {
        const btn = $(`<button class="choice-btn">${choice}</button>`);
        btn.on("click", function() {
          if (index === q.answer) {
            $("#result_display").html('<span class="christmas-text">æ­£è§£ï¼ğŸ‰</span>');
          } else {
            $("#result_display").html(`<span class="christmas-text">ä¸æ­£è§£â€¦ æ­£è§£ã¯ã€Œ${q.choices[q.answer]}ã€ã§ã™</span>`);
          }
          $("#next_button").text("æ¬¡ã®å•é¡Œ").show().off("click").on("click", nextQuestion);
        });
        choicesDiv.append(btn);
      });
    }

    function nextQuestion() {
      currentQuestion++;
      if (currentQuestion < QUESTIONS.length) {
        loadQuestion();
      } else {
        // ã‚²ãƒ¼ãƒ çµ‚äº†
        $("#question_image").hide();
        $("#choices_section").hide();
        $("#next_button").hide().off("click");

        $("#result_display")
          .html('<span class="cursive-text">Game Over! Great job! ğŸ‰<br>Have a wonderful holiday season!</span>')
          .css({
            display: 'flex',
            'justify-content': 'center',
            'align-items': 'center',
            'text-align': 'center',
            height: '300px'
          });
      }
    }
  </script>
</body>
</html>
